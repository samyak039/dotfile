########
# CORE #
########

# 24-bit colors
# set -sa terminal-overrides ",xterm-termite:Tc"
set -sa terminal-overrides "*:Tc"
# set-default colorset-option -ga terminal-overrides ",xterm-256color:Tc"
set -ga terminal-overrides ",xterm-256color:Tc"

# make colors inside tmux look the same as outside of tmux
# see https://github.com/tmux/tmux/issues/696
# see https://stackoverflow.com/a/41786092
# set -ga terminal-overrides ",tmux-256color:Tc"

# vim keybinds
set-window-option -g mode-keys vi

# mouse support
set -g mouse on

# fast scrolling
bind -T root WheelUpPane   if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; copy-mode -e; send-keys -M"
bind -T root WheelDownPane if-shell -F -t = "#{alternate_on}" "send-keys -M" "select-pane -t =; send-keys -M"

# set status bar on top
set -g status-position top

############
# KEYBINDS #
############

# sane prefix <C-a>
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# reload config
unbind r
bind r source-file ~/.config/tmux/tmux.conf

# sane vim selection mode
# TODO: not working
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# open panes in cwd
unbind %
unbind \"
bind _ split-window -v -c "#{pane_current_path}" # -I "Split window vertically"
bind | split-window -h -c "#{pane_current_path}" # -I "Split window horizontally"

###############
# COLORSCHEME #
###############

# ### theme settings ###
#
# # window separators
# set-option -wg window-status-separator ""
#
# # monitor window changes
# set-option -wg monitor-activity on
# set-option -wg monitor-bell on
#
# # set statusbar update interval
# set-option -g status-interval 1
#
# ### colorscheme ###
#
# # change window screen colors
# set-option -wg mode-style bg="#b8bb26",fg="#282828",bold
#
# # default statusbar colors (terminal bg should be #282828)
# set-option -g status-style bg=terminal,fg="#ebdbb2",bold
#
# # default window title colors
# set-option -wg window-status-style bg="#3c3836",fg="#7c6f64"
#
# # colors for windows with activity
# set-option -wg window-status-activity-style bg="#3c3836",fg="#a89984"
#
# # colors for windows with bells
# set-option -wg window-status-bell-style bg="#3c3836",fg="#fe8019"
#
# # active window title colors
# set-option -wg window-status-current-style bg="#fe8019",fg="#3c3836"
#
# # pane border
# set-option -g pane-active-border-style fg="#fe8019"
# set-option -g pane-border-style fg="#3c3836"
#
# # message info
# set-option -g message-style bg="#fe8019",fg="#3c3836"
#
# # writing commands inactive
# set-option -g message-command-style bg="#a89984",fg="#3c3836"
#
# # pane number display
# set-option -g display-panes-active-colour "#fe8019"
# set-option -g display-panes-colour "#3c3836"
#
# # clock
# set-option -wg clock-mode-colour "#fe8019"
#
# # copy mode highlighting
# %if #{>=:#{version},3.2}
#     set-option -wg copy-mode-match-style "bg=#a89984,fg=#3c3836"
#     set-option -wg copy-mode-current-match-style "bg=#fe8019,fg=#3c3836"
# %endif
#
# # statusbar formatting
# # "#fe8019" MUST be in lowercase here (conflicts with statusline alias otherwise)
# set-option -g status-left "#[bg=#a89984, fg=#3c3836]#{?client_prefix,#[bg=#fe8019],#[bg=#a89984]} #{session_name} "
# set-option -g status-right "#[bg=#3c3836, fg=#7c6f64] %Y-%m-%d %H:%M:%S #[bg=#a89984, fg=#3c3836]#{?client_prefix,#[bg=#fe8019],#[bg=#a89984]} #{host_short} "
#
# set-option -wg window-status-current-format "#{?window_zoomed_flag,#[fg=default bold],#[fg=default]} #{window_index} #{window_name} "
# set-option -wg window-status-format "#{?window_zoomed_flag,#[fg=default bold],#[fg=default]} #{window_index} #{window_name} "

###########
# PLUGINS #
###########

#  Tmux Plugin Manager
set -g @plugin "tmux-plugins/tpm"

# basic tmux settings everyone can agree on 
set -g @plugin "tmux-plugins/tmux-sensible"

# Seamless navigation between tmux panes and vim splits 
set -g @plugin "christoomey/vim-tmux-navigator"

# # TOKYONIGHT theme
# set -g @plugin "theutz/tmux-tokyonight-nvim"
# set -g @tokyonight "moon"

# # gruvbox
set -g @plugin "lawabidingcactus/tmux-gruvbox-truecolor"
# set -g @plugin "egel/tmux-gruvbox"
# set -g @tmux-gruvbox "dark" # or "light"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run "$XDG_CONFIG_HOME/tmux/plugins/tpm/tpm"

